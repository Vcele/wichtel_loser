{% extends "base.html" %}

{% block title %}Your Assignment - Wichtel Loser{% endblock %}

{% block content %}
<div class="card" style="text-align: center;">
    <h2>ğŸ‘‹ Hello, {{ participant.name }}!</h2>
    <p style="color: rgba(255,255,255,0.7);">
        Event: <strong>{{ event.name }}</strong>
    </p>
</div>

{% if event.status == "Closed" and assigned_to %}
<div class="card gift-reveal">
    <div class="gift-icon">ğŸ</div>
    <p style="font-size: 1.2rem; margin-bottom: 0.5rem;">You're buying a gift for:</p>
    <div class="assigned-name">{{ assigned_to.name }}</div>
    <p style="color: rgba(255,255,255,0.7); margin-top: 1rem;">
        Remember - keep it a secret! ğŸ¤«
    </p>
</div>

<div class="card" style="text-align: center;">
    <h2>ğŸ„ Gift Ideas</h2>
    <p style="color: rgba(255,255,255,0.7);">
        Think about what {{ assigned_to.name }} might like!
    </p>
    <ul style="text-align: left; margin: 1rem 0; padding-left: 1.5rem; color: rgba(255,255,255,0.8);">
        <li>Something homemade with love</li>
        <li>A thoughtful book or game</li>
        <li>Cozy winter accessories</li>
        <li>Delicious treats or snacks</li>
        <li>A fun experience voucher</li>
    </ul>
</div>
{% elif event.status == "Open" %}
<div class="card" style="text-align: center;">
    <div style="font-size: 4rem; margin-bottom: 1rem;">â³</div>
    <h2>Waiting for Draw</h2>
    <p style="color: rgba(255,255,255,0.7);">
        The organizer hasn't closed the event yet. Check back later to see who you're buying a gift for!
    </p>
</div>

<div class="card">
    <h2>ğŸ‘¥ Current Participants ({{ event.participants | length }})</h2>
    <ul class="participant-list">
        {% for id, p in event.participants %}
        <li class="participant-item">
            <div class="participant-avatar">ğŸ…</div>
            <span>{{ p.name }}</span>
            {% if p.id == participant.id %}
            <span style="color: var(--gold); margin-left: auto;">â† You!</span>
            {% endif %}
        </li>
        {% endfor %}
    </ul>
</div>
{% else %}
<div class="card" style="text-align: center;">
    <div style="font-size: 4rem; margin-bottom: 1rem;">â“</div>
    <h2>Something went wrong</h2>
    <p style="color: rgba(255,255,255,0.7);">
        We couldn't find your assignment. Please contact the organizer.
    </p>
</div>
{% endif %}
{% endblock %}
