{% extends "base.html" %}

{% block title %}Joined {{ event.name }} - Wichtel Loser{% endblock %}

{% block content %}
<div class="card" style="text-align: center;">
    <div style="font-size: 4rem; margin-bottom: 1rem;">ğŸ‰</div>
    <h2>Welcome, {{ participant_name }}!</h2>
    <p style="font-size: 1.2rem; margin-bottom: 1rem;">
        You've successfully joined <strong>{{ event.name }}</strong>
    </p>
    <p style="color: rgba(255,255,255,0.7);">
        Wait for the organizer to close the event to see who you'll be giving a gift to!
    </p>
</div>

<div class="card">
    <h2>ğŸ“± Bookmark This</h2>
    <p style="margin-bottom: 1rem;">Save this link to check your assignment later:</p>
    <div class="copy-box">
        <code id="event-link">{{ event_url }}</code>
        <button class="copy-btn" onclick="copyEventLink()">Copy</button>
    </div>
    <p style="color: rgba(255,255,255,0.6); font-size: 0.9rem;">
        Your browser remembers you, so you can come back anytime!
    </p>
</div>

<div class="card">
    <h2>ğŸ‘¥ Current Participants ({{ event.participants | length }})</h2>
    <ul class="participant-list">
        {% for id, participant in event.participants %}
        <li class="participant-item">
            <div class="participant-avatar">ğŸ…</div>
            <span>{{ participant.name }}</span>
            {% if participant.name == participant_name %}
            <span style="color: var(--gold); margin-left: auto;">â† You!</span>
            {% endif %}
        </li>
        {% endfor %}
    </ul>
</div>

<div style="text-align: center; margin-top: 1rem;">
    <a href="{{ event_url }}" class="btn btn-primary">
        ğŸ‘€ View My Assignment
    </a>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
    function copyEventLink() {
        const link = window.location.origin + document.getElementById('event-link').textContent;
        copyToClipboard(link);
    }
</script>
{% endblock %}
